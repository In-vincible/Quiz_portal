{% if quiz %}
{% load staticfiles %}
Quiz successfully created<br><a href='/logout/'>logout</a><br>
{{quiz.name}}
{{quiz.beginning_quote}}
<input type="hidden" id="quiz_id" value="{{ quiz.quiz_id }}">
<a href="{{server}}play?quiz_id={{ quiz.quiz_id }}">Check out the Quizzz</a>
<select id="no_of_options">
	<option value=2>2 options</option>
	<option value=3>3 options</option>
	<option value=4>4 options</option>
	<option value=5>5 options</option>
	<option value=6>6 options</option>
	<option value=7>7 options</option>
	<option value=8>8 options</option>
	<option value=9>9 options</option>
	<option value=10>10 options</option>

</select>
<button id='question'>Add Question</button>
<div id='question_area'></div>
<script src="{% static "assets/js/jquery-1.9.1.js" %} "></script>
<script type="text/javascript">
var question_count = 0;
$("#question").click(function (){
	question_count++;
	html = '<div id="question'+question_count+'" class="question"><input type="text" placeholder="Question Title" class="question_title"><input type="text" placeholder="Correct Message" class="correct_message"><input type="text" placeholder="Incorrect Message" class="incorrect_message"><select class="question_type"><option value="sc">Single Correct</option><option value="mc">Multiple Correct</option></select>';
	var val = $("#no_of_options").val();
	html += '<input type="hidden" class="no_options" value="'+val+'">';
	html += '<br><button id="'+question_count+'" class="add_button">Add the Question</button><br>';
	val++;
	while(--val){
		html += '<input type="text" placeholder="'+val+' option" class="'+val+'option"><select class="'+val+'"><option value=0>Incorrect</option><option value=1>Correct</option></select><br>';
	}
	html += "<br><br></div>"
	$("#question_area").append(html);

});
$(document).on("click",".add_button",function(event){
	event.preventDefault();
	$(this).prop("disabled",true);
	var questionId = "#question" + $(this).attr("id");
	url = "{{server}}"+'create_question/';
	var val = $(".no_options").val();
	var options = [];
	val++;
	while(--val){
		options.push({
			"value":$(questionId+" ."+val+"option").val(),
			"status":$(questionId+" ."+val).val()
		});
	}
	console.log(options[0]);
	console.log(options[1]);
	data = {
		"quiz_id":$("#quiz_id").val(),
		"question_type":$(questionId+" .question_type").val(),
		"question_title":$(questionId+" .question_title").val(),
		"correct_message":$(questionId+" .correct_message").val(),
		"incorrect_message":$(questionId+" .incorrect_message").val(),
		"options":JSON.stringify(options),
	};
	
	console.log(data);
	theAjax(url,data).done(function(response){
		$(questionId).append(response+"<br><br><br>")
	});
});

function theAjax(uri,data){
 return $.ajax({
        type:"POST",
        data:data,
        url: uri,

 });
}

</script>
{% else %}
shit
{% endif %}